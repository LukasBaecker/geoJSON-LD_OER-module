---
title: "part2_understandingJSON"
output:
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
description: >
  Learn how to set up R and RStudio on your machine. We will also demonstrate
  how to install R packages from CRAN, and install the tidyverse package.
---

## 2. Understanding the Concepts
To use GeoJSON and share it under the JSON-LD specification it is important to understand the concepts of JSON, GeoJSON, JSON-LD and GeoJSON-LD. In this chapter we will focus on these four specifications and learn them step by step

### JSON

JSON (JavaScript Object Notation) is a standartizised lightweight data-interchange format. It is easy for humans to read and write. It is easy for machines to parse and generate. JSON is a text format that is completely language independent but uses conventions that are familiar to programmers of the C-family of languages, including C, C++, C#, Java, JavaScript, Perl, Python, and many others. These properties make JSON an ideal data-interchange language (www.JSON.org).

JSON is built on two structures:

A collection of name/value pairs. In various languages, this is realized as an object, record, struct, dictionary, hash table, keyed list, or associative array.
An ordered list of values. In most languages, this is realized as an array, vector, list, or sequence.

These are universal data structures. Virtually all modern programming languages support them in one form or another. It makes sense that a data format that is interchangeable with programming languages also be based on these structures.

In JSON, they take on these forms:

An object is an unordered set of name/value pairs. An object begins with {left brace and ends with }right brace. Each name is followed by :colon and the name/value pairs are separated by ,comma.


```{r quiz_json, echo=FALSE}
quiz(caption = "Quiz - JSON",
  question("How often should you update R?",
    answer("Everytime you use it", message = "This will be too often unless you use R very rarely!"),
    answer("About once a year", correct = TRUE, "A new version of R is released about once a year. Update sooner if you encounter a bug that you cannot explain."),
    answer("Never", message = "A new version of R is released about once a year. I'll assume that you are using the newest version of R, which will be the fastest version with the fewest unexpected behaviors." ),
    allow_retry = FALSE
  )
)
```


### GeoJSON
GeoJSON is a format for encoding a variety of geographic data structures. It is a specification of JSON. Additional to the JSON rules there are some more that defines a GeoJSON. A GeoJSON has to have a 'type' attribute than can be a value of these: [Point, MultiPoint, LineString, MultiLineString, Polygon, MultiPolygon, GeometryCollection, Feature, FeatureCollection]. Furthermore the position is important for a GeoJSON where coordinates are alway given in WGS84 due to the fact that other CRS harm the interoperability of the GeoJSON.

An example for a GeoJSON can be seen in the next examples. The first one shows a valid point and the second one a feature with a geometry that is also a point. The difference lays in the structure and the additional information that are included.

```json
{
    "type": "Point",
    "coordinates": [125.6, 10.1]
}

{
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [125.6, 10.1]
  },
  "properties": {
    "name": "Dinagat Islands"
  }
}

```

Another example shows a regular MultiPolygon. It has multiple arrays of points that are also saved inside of arrays. At this point it is important to keep track of the brackets to get not confused and give the computer wrong information about the given JSON.

```json
    {
         "type": "MultiPolygon",
         "coordinates": [
             [
                 [
                     [102.0, 2.0],
                     [103.0, 2.0],
                     [103.0, 3.0],
                     [102.0, 3.0],
                     [102.0, 2.0]
                 ]
             ],
             [
                 [
                     [100.0, 0.0],
                     [101.0, 0.0],
                     [101.0, 1.0],
                     [100.0, 1.0],
                     [100.0, 0.0]
                 ],
                 [
                     [100.2, 0.2],
                     [100.2, 0.8],
                     [100.8, 0.8],
                     [100.8, 0.2],
                     [100.2, 0.2]
                 ]
             ]
         ]
     }

```


POSSIBLE QUESTIONS AT THE END:
what do we see in a code snipped 
what is legal or illigal with geojson 

If you would like to see the official definition of GeoJSON you may have [a look at this page](https://datatracker.ietf.org/doc/html/rfc7946).


### JSON-LD

What is 'Linked Data'
![](https://youtu.be/4x_xzT5eF5Q)

Linked Data Signature
![](https://youtu.be/QdUZaYeQblY)

What is JSON-LD
![](https://youtu.be/vioCbTo3C-4)

JSON-LD Basic Markup
![](https://youtu.be/UmvWk_TQ30A)

JSON-LD Compaction and Expansion
![](https://youtu.be/Tm3fD89dqRE)

### GeoJSON-LD



```{r addition, exercise=TRUE}
1 + 1
```




```{r quiz2, echo=FALSE}
quiz(caption = "Quiz - Install R",
  question("Is R free to download and use?",
    answer("Yes!", correct = TRUE, message = "R is free _and_ open source, which means that anyone can read, use, and copy the source code of the R language."),
    answer("No.")
  ),
  question("Where do you download R?",
    answer("www.rstudio.com/download"),
    answer("[cloud.r-project.org](http://cloud.r-project.org)", correct = TRUE, message = "You can also download R from [cran.r-project.org](http://cran.r-project.org)"),
    answer("www.r-project.org", message = "Good try, but not exactly. www.r-project.org doesn't provide a download link, but it does provide a link to one the websites above."),
    answer("www.r.com"),
    allow_retry = TRUE
  ),
  question("How often should you update R?",
    answer("Everytime you use it", message = "This will be too often unless you use R very rarely!"),
    answer("About once a year", correct = TRUE, "A new version of R is released about once a year. Update sooner if you encounter a bug that you cannot explain."),
    answer("Never", message = "A new version of R is released about once a year. I'll assume that you are using the newest version of R, which will be the fastest version with the fewest unexpected behaviors." ),
    allow_retry = TRUE
  )
)
```

```{r where-am-i, echo=FALSE}
question("Where are you right now? (select ALL that apply)",
  answer("Planet Earth", correct = TRUE),
  answer("Pluto"),
  answer("At a computing device", correct = TRUE),
  answer("In the Milky Way", correct = TRUE),
    random_answer_order = TRUE,
  incorrect = "Incorrect. You're on Earth, in the Milky Way, at a computer."
)
```


### Final exercise

The following GeoJSON file got some mistakes. Can you hunt them down to run the code correctly?
```{r exercise1, exercise = TRUE}
result <- fromJSON('{
         "type": "MultiPolygon",
         "coordinates": [
             [
                     [102.0, 2.0],
                     [103.0, 2.0],
                     [103.0, 3.0],
                     [102.0, 3.0],
                     [102.0, 2.0]
             ],
             [
                 [
                     [100.0, 0.0],
                     [101.0, 0.0],
                     [101.0, 1.0],
                     [100.0, 1.0],
                     [100.0, 0.0]
                
         ]
     }')


```

```{r exercise2, exercise = TRUE}

spdf <- geojson_read('PUT IN A URL OT A GEOJSON FILE THAT MIGHT BE INTERESTING',  what = "sp")

par(mar=c(0,0,0,0))
plot(spdf_region_6, col="grey")
```
 
