## 3. Create GeoJSON-LD

### Introduction

In the last chapter of this tutorial we have learned about the basic concepts of GeoJSON and GEOJSON-LD. In this chapter we will explore how to create new insightful data in GeoJSON-LD format in order to share it with users and applications. For this we will take a look at existing data in GeoJSON format and make changes to it, so that we get a sharable GeoJSON-LD file in the end. Let's get started!

```{r include=FALSE}
aasee <- toJSON(geojson_read("./data/aasee.geojson"), collapse = "\n")

featurecollection <- toJSON(geojson_read("./data/featurecollection.geojson"), collapse = "\n") 

points <- toJSON(geojson_read("./data/points.geojson"), collapse = "\n")

route <- toJSON(geojson_read("./data/route.geojson"), collapse = "\n")
```

Roland is working for a GeoIT company and he wants to collect and share geodata for touristic purposes. To accomplish that, he already collected some data in GeoJSON format but he would like to share it using the GeoJSON-LD standard. As a first step, Roland collected data for two different points of interest and put it into a GeoJSON multipoint file. The first one is the Institute for Geoinformatics and the second one is the lake Aasse in MÃ¼nster:

```{r echo = FALSE, message = FALSE, warning = FALSE, results = 'asis', width = 4, height = 4}
map <- leaflet(width = 1000, height = 500) %>% 
         addTiles() %>%
         setView(lng = 7.62, lat = 51.96, zoom = 14) %>%
         addGeoJSON(points)
map
```
<br>
```{json}
{
    "type": "Feature",
    "geometry": {
        "type": "MultiPoint",
        "coordinates": [
            [
                7.59578,
                51.96922
            ],
            [
                7.6064,
                51.95306
            ]
        ]
    },
    "properties": {}
}
```
<br>
Taking into account, what you have learned about the JSON-LD and GeoJSON-LD standards, think about adjustments you would have to make to the regular GeoJSON displayed above in order to transform it to linked data. When you are ready, click 'Continue' to proceed to the next step of the tutorial.

### Transforming GeoJSON into GeoJSON-LD

As you might already seen in chapter 2.3 of this tutorial, one essential part of a linked data file is the context. It basically defines, how websites or applications should interpret the attributes of a linked data file. In this case, since we have GeoJSON data, we have to specify in the context attribute, how `type`, `properties` and `geometry` should be interpreted. Since there already is a publicly available context for GeoJSON data, we can just set a URL linking to the remote context file:

```{json}
{
    "@context": "https://geojson.org/geojson-ld/geojson-context.jsonld",
    "type": "Feature",
    "geometry": {
        "type": "MultiPoint",
        "coordinates": [
            [
                7.59578,
                51.96922
            ],
            [
                7.6064,
                51.95306
            ]
        ]
    },
    "properties": {}
}
```

Try to validate our adjusted GeoJSON data using the [schema.org validator](https://validator.schema.org/).

Did you encounter an error when trying to validate our adjusted data? Don't worry! This is just because schema.org does not allow for remote contexts, that are not hosted on schema.org itself. Based on tutorial chapter 2.3, think about how you could potentially resolve this problem (Hint: Have a look at the [GeoJSON context file](https://geojson.org/geojson-ld/geojson-context.jsonld)).

### GeoJSON context

Instead of linking to the remote file, we could also just take the contents of the remote file and put it directly into our GeoJSON-LD file:

```{json}
{
  "@context": {
    "@version": 1.1,
    "geojson": "https://purl.org/geojson/vocab#",
    "Feature": "geojson:Feature",
    "FeatureCollection": "geojson:FeatureCollection",
    "GeometryCollection": "geojson:GeometryCollection",
    "LineString": "geojson:LineString",
    "MultiLineString": "geojson:MultiLineString",
    "MultiPoint": "geojson:MultiPoint",
    "MultiPolygon": "geojson:MultiPolygon",
    "Point": "geojson:Point",
    "Polygon": "geojson:Polygon",
    "bbox": {
      "@container": "@list",
      "@id": "geojson:bbox"
    },
    "coordinates": {
      "@container": "@list",
      "@id": "geojson:coordinates"
    },
    "features": {
      "@container": "@set",
      "@id": "geojson:features"
    },
    "geometry": "geojson:geometry",
    "id": "@id",
    "properties": "geojson:properties",
    "type": "@type"
},
    "type": "Feature",
    "geometry": {
        "type": "MultiPoint",
        "coordinates": [
            [
                7.59578,
                51.96922
            ],
            [
                7.6064,
                51.95306
            ]
        ]
    },
    "properties": {}
}
```

Try to validate our GeoJSON-LD code again and see what happens.

Amazing! We now have our first valid GeoJSON-LD file. But wait!
