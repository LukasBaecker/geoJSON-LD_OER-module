---
title: "part2_understandingJSON_GEOJSON"
output:
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
description: >
  Learn how to set up R and RStudio on your machine. We will also demonstrate
  how to install R packages from CRAN, and install the tidyverse package.
---

## 2.2. GeoJSON

```{r geopic, echo=FALSE, out.width= "65%", out.extra='style="float:right; padding:10px"'}
geoimg <- load.image("graphics/undraw_real_time_analytics_re_yliv.png")
grid.raster(geoimg)
```

GeoJSON is the JSON specialization for storing geographical data data. Additional to the JSON rules there are some more that defines a GeoJSON. A GeoJSON has to have a 'type' attribute than can be a value of these: [`Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `GeometryCollection`, `Feature`, `FeatureCollection`]. Furthermore the position is important for a GeoJSON where coordinates are allway given in `WGS84` due to the fact that other CRS harm the interoperability of the GeoJSON. Below you can see the official definition from [GeoJSON.org](https://geojson.org/).:

::: {#GeoJSONdefinition .message}
GeoJSON is a format for encoding a variety of geographic data structures.GeoJSON supports the following geometry types: Point, LineString, Polygon, MultiPoint, MultiLineString, and MultiPolygon. Geometric objects with additional properties are Feature objects. Sets of features are contained by FeatureCollection objects.
:::

Now, lets have a look at an example for a GeoJSON. The first one shows a valid point and the second one a feature with a geometry that is also a point. The difference lays in the structure and the additional information that are included.

A point saved in a GeoJSON as a `Point`:

``` json
{
    "type": "Point",
    "coordinates": [125.6, 10.1]
}
```

A point saved as a `Feature` with additional information:

``` json
{
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [125.6, 10.1]
  },
  "properties": {
    "name": "Dinagat Islands"
  }
}
```

Another example shows a regular `MultiPolygon`. It has multiple arrays of points that are also saved inside of arrays. At this point it is important to keep track of the brackets to get not confused and supply the computer with wrong information buy using a wrong structure.

``` json
    {
         "type": "MultiPolygon",
         "coordinates": [
             [
                 [
                     [102.0, 2.0],
                     [103.0, 2.0],
                     [103.0, 3.0],
                     [102.0, 3.0],
                     [102.0, 2.0]
                 ]
             ],
             [
                 [
                     [100.0, 0.0],
                     [101.0, 0.0],
                     [101.0, 1.0],
                     [100.0, 1.0],
                     [100.0, 0.0]
                 ],
                 [
                     [100.2, 0.2],
                     [100.2, 0.8],
                     [100.8, 0.8],
                     [100.8, 0.2],
                     [100.2, 0.2]
                 ]
             ]
         ]
     }
```

I you want to read the whole GeoJSON specification you can [follow this link to the GeoJSON specification (RFC 7946)](https://datatracker.ietf.org/doc/html/rfc7946)

POSSIBLE QUESTIONS AT THE END: what do we see in a code snipped what is legal or illigal with geojson

If you would like to see the official definition of GeoJSON you may have [a look at this page](https://datatracker.ietf.org/doc/html/rfc7946).

TODO: NOCHMAL DETAILIERTER BESCHREIBEN UND SCHRITT FÜR SCHRITT ERKLÄREN WIE NE GEOJSON AUFGEBAUT IST

### Setting up a GEOJSON-file

```{r JSONpagePic, echo=FALSE, out.width= "65%", out.extra='style="float:right; padding:10px"'}
myimg2 <- load.image("graphics/undraw_Pair_programming_re_or4x.png")
grid.raster(myimg2)
```

Let's dive into some examples for you to understand the concepts presented. As you can see, the idea of using `{}` to represent objects, `""` to specify the attributes names and other concepts already presented in the section 2.1 are still valid. Remember the geometry differences that we can use and the way we can represent them by using the the combination of `{}`, `[]`, and `,`. In the following code block you can write the GEOJSON file as the tasks guides you.

::: {#SupermarketTask .task-message .panel}
::: panel-body
Write a valid GEOJSON file that reflects the following description: Suppose that you want to create a GEOJSON file with some supermarkets available in the region that you live,

```{json taskLuigi, exercise = TRUE}

```

```{json taskLuigi-solution}
{
    "name":"Pizza Luigi",
    "dishes":[
        {"name":"pizza","price":"7","vegan_option":"false"},
        {"name":"pasta","price":"6","vegan_option":"true"},
        {"name":"tiramisu","price":"10","vegan_option":"true"}
     ]
}
```
:::
:::

What do we see in the example? First, we can see, that the object is wrapped in { } as defined before. Then, we see that the object has multiple attributes that have a specific name and a value both packed in " " and divided by a :. The left side of the colon shows the name of the attribute while the right side shows the value. We can see, that a value can be a list (an array) of values enclosed by [ ] and that a value can also be an object itself.
